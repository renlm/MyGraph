!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base","./grid.common"],e):e(jQuery)}(function(R){"use strict";var U={};R.jgrid.extend({editGridRow:function(E,M){var e=R.jgrid.getRegional(this[0],"edit"),t=this[0].p.styleUI,A=R.jgrid.styleUI[t].formedit,B=R.jgrid.styleUI[t].common;return M=R.extend(!0,{top:0,left:0,width:"500",datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:B.overlay,removemodal:!0,form:"edit",template:null,focusField:!0,editselected:!1,html5Check:!1,buttons:[]},e,M||{}),U[R(this)[0].p.id]=M,this.each(function(){var u,h,g,t,i,m,D,y,f,q,a,e,d,r,o,n,l,s,c,p,j,v,b,w,x,_=this;function I(){var e,t,a={};for(e in R(h).find(".FormElement").each(function(){var e,t=R(".customelement",this);if(t.length){var t=t[0],i=R(t).attr("name");R.each(_.p.colModel,function(){if(this.name===i&&this.editoptions&&R.jgrid.isFunction(this.editoptions.custom_value)){try{if(m[i]=this.editoptions.custom_value.call(_,R("#"+R.jgrid.jqID(i),h),"get"),void 0===m[i])throw"e1"}catch(e){"e1"===e?R.jgrid.info_dialog(f.errcap,"function 'custom_value' "+U[R(this)[0]].p.msg.novalue,U[R(this)[0]].p.bClose,{styleUI:U[R(this)[0]].p.styleUI}):R.jgrid.info_dialog(f.errcap,e.message,U[R(this)[0]].p.bClose,{styleUI:U[R(this)[0]].p.styleUI})}return!0}})}else{switch(R(this).get(0).type){case"checkbox":R(this).is(":checked")?m[this.name]=R(this).val():(e=R(this).attr("offval"),m[this.name]=e);break;case"select-one":m[this.name]=R(this).val();break;case"select-multiple":m[this.name]=R(this).val(),m[this.name]=m[this.name]?m[this.name].join(","):"";break;case"radio":if(a.hasOwnProperty(this.name))return!0;a[this.name]=void 0===R(this).attr("offval")?"off":R(this).attr("offval");break;default:m[this.name]=R(this).val()}_.p.autoencode&&(m[this.name]=R.jgrid.htmlEncode(m[this.name]))}}),a)a.hasOwnProperty(e)&&(t=R('input[name="'+e+'"]:checked',h).val(),m[e]=void 0!==t?t:a[e],_.p.autoencode&&(m[e]=R.jgrid.htmlEncode(m[e])));return 1}function k(i,a,d){var r,o,e,t,n,l=0;(U[_.p.id].checkOnSubmit||U[_.p.id].checkOnUpdate)&&(_.p.savedData={},_.p.savedData[a.p.id+"_id"]=i);var s=a.p.colModel;if("_empty"===i)return R(s).each(function(){r=this.name,n=R.extend({},this.editoptions||{}),(e=R("#"+R.jgrid.jqID(r),d))&&e.length&&null!==e[0]&&(t="","custom"===this.edittype&&R.jgrid.isFunction(n.custom_value)?n.custom_value.call(_,R("#"+r,d),"set",t):n.defaultValue?(t=R.jgrid.isFunction(n.defaultValue)?n.defaultValue.call(_):n.defaultValue,"checkbox"===e[0].type?(n=t.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==n?(e[0].checked=!0,e[0].defaultChecked=!0,e[0].value=t):(e[0].checked=!1,e[0].defaultChecked=!1):e.val(t)):"checkbox"===e[0].type?(e[0].checked=!1,e[0].defaultChecked=!1,t=R(e).attr("offval")):e[0].type&&"select"===e[0].type.substr(0,6)?e[0].selectedIndex=0:e.val(t),!0!==U[_.p.id].checkOnSubmit&&!U[_.p.id].checkOnUpdate||(_.p.savedData[r]=t))}),void R("#id_g",d).val(i);var c=R(a).jqGrid("getInd",i,!0);c&&(R('td[role="gridcell"]',c).each(function(t){if("cb"!==(r=s[t].name)&&"subgrid"!==r&&"rn"!==r&&!0===s[t].editable&&"sc"!==r){if(r===a.p.ExpandColumn&&!0===a.p.treeGrid)o=R(this).text();else try{o=R.unformat.call(a,R(this),{rowId:i,colModel:s[t]},t)}catch(e){o="textarea"===s[t].edittype?R(this).text():R(this).html()}switch(_.p.autoencode&&(o=R.jgrid.htmlDecode(o)),!0!==U[_.p.id].checkOnSubmit&&!U[_.p.id].checkOnUpdate||(_.p.savedData[r]=o),r=R.jgrid.jqID(r),s[t].edittype){case"select":var e=o.split(","),e=R.map(e,function(e){return R.jgrid.trim(e)});R("#"+r+" option",d).each(function(){!(s[t].editoptions.multiple||R.jgrid.trim(o)!==R.jgrid.trim(R(this).text())&&e[0]!==R.jgrid.trim(R(this).text())&&e[0]!==R.jgrid.trim(R(this).val()))||s[t].editoptions.multiple&&(-1<R.inArray(R.jgrid.trim(R(this).text()),e)||-1<R.inArray(R.jgrid.trim(R(this).val()),e))?this.selected=!0:this.selected=!1}),!0!==U[_.p.id].checkOnSubmit&&!U[_.p.id].checkOnUpdate||(o=R("#"+r,d).val(),s[t].editoptions.multiple&&(o=o.join(",")),_.p.savedData[r]=o);break;case"checkbox":o=String(o),s[t].editoptions&&s[t].editoptions.value?s[t].editoptions.value.split(":")[0]===o?R("#"+r,d)[_.p.useProp?"prop":"attr"]({checked:!0,defaultChecked:!0}):R("#"+r,d)[_.p.useProp?"prop":"attr"]({checked:!1,defaultChecked:!1}):(o=o.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==o?(R("#"+r,d)[_.p.useProp?"prop":"attr"]("checked",!0),R("#"+r,d)[_.p.useProp?"prop":"attr"]("defaultChecked",!0)):(R("#"+r,d)[_.p.useProp?"prop":"attr"]("checked",!1),R("#"+r,d)[_.p.useProp?"prop":"attr"]("defaultChecked",!1)),!0!==U[_.p.id].checkOnSubmit&&!U[_.p.id].checkOnUpdate||(o=R("#"+r,d).is(":checked")?R("#"+r,d).val():R("#"+r,d).attr("offval"),_.p.savedData[r]=o);break;case"custom":try{if(!s[t].editoptions||!R.jgrid.isFunction(s[t].editoptions.custom_value))throw"e1";s[t].editoptions.custom_value.call(_,R("#"+r,d),"set",o)}catch(e){"e1"===e?R.jgrid.info_dialog(f.errcap,"function 'custom_value' "+U[R(this)[0]].p.msg.nodefined,R.rp_ge[R(this)[0]].p.bClose,{styleUI:U[R(this)[0]].p.styleUI}):R.jgrid.info_dialog(f.errcap,e.message,R.rp_ge[R(this)[0]].p.bClose,{styleUI:U[R(this)[0]].p.styleUI})}break;default:("&nbsp;"===o||"&#160;"===o||1===o.length&&160===o.charCodeAt(0))&&(o=""),R("#"+r,d).val(o)}l++}}),0<l&&(R("#id_g",h).val(i),!0!==U[_.p.id].checkOnSubmit&&!U[_.p.id].checkOnUpdate||(_.p.savedData[a.p.id+"_id"]=i)))}function C(){var a,d,r,e,t,o,i,n=[!0,"",""],l={},s=_.p.prmNames,c=R(_).triggerHandler("jqGridAddEditBeforeCheckValues",[m,R(x),D]);if(c&&"object"==typeof c&&(m=c),R.jgrid.isFunction(U[_.p.id].beforeCheckValues)&&(c=U[_.p.id].beforeCheckValues.call(_,m,R(x),D))&&"object"==typeof c&&(m=c),!U[_.p.id].html5Check||R.jgrid.validateForm(q[0])){for(e in m)if(m.hasOwnProperty(e)&&!1===(n=R.jgrid.checkValues.call(_,m[e],e))[0])break;if(R.each(_.p.colModel,function(e,t){t.editoptions&&!0===t.editoptions.NullIfEmpty&&m.hasOwnProperty(t.name)&&""===m[t.name]&&(m[t.name]="null")}),n[0]&&(void 0===(l=R(_).triggerHandler("jqGridAddEditClickSubmit",[U[_.p.id],m,D]))&&R.jgrid.isFunction(U[_.p.id].onclickSubmit)&&(l=U[_.p.id].onclickSubmit.call(_,U[_.p.id],m,D)||{}),(n=void 0===(n=R(_).triggerHandler("jqGridAddEditBeforeSubmit",[m,R(x),D]))?[!0,"",""]:n)[0]&&R.jgrid.isFunction(U[_.p.id].beforeSubmit)&&(n=U[_.p.id].beforeSubmit.call(_,m,R(x),D))),n[0]&&!U[_.p.id].processing){if(U[_.p.id].processing=!0,R("#sData",h+"_2").addClass(B.active),c=U[_.p.id].url||R(_).jqGrid("getGridParam","editurl"),r=s.oper,d="clientArray"===c?_.p.keyName:s.id,m[r]="_empty"===R.jgrid.trim(m[_.p.id+"_id"])?s.addoper:s.editoper,m[r]===s.addoper&&void 0!==m[d]||(m[d]=m[_.p.id+"_id"]),delete m[_.p.id+"_id"],m=R.extend(m,U[_.p.id].editData,l),!0===_.p.treeGrid)for(t in m[r]===s.addoper&&(o=R(_).jqGrid("getGridParam","selrow"),p="adjacency"===_.p.treeGridModel?_.p.treeReader.parent_id_field:"parent_id",m[p]=o),_.p.treeReader)_.p.treeReader.hasOwnProperty(t)&&(i=_.p.treeReader[t],m.hasOwnProperty(i)&&(m[r]===s.addoper&&"parent_id_field"===t||delete m[i]));m[d]=R.jgrid.stripPref(_.p.idPrefix,m[d]);var p=R.extend({url:c,type:U[_.p.id].mtype,data:R.jgrid.isFunction(U[_.p.id].serializeEditData)?U[_.p.id].serializeEditData.call(_,m):m,complete:function(e,t){if(R("#sData",h+"_2").removeClass(B.active),m[d]=_.p.idPrefix+m[d],300<=e.status&&304!==e.status?(n[0]=!1,n[1]=R(_).triggerHandler("jqGridAddEditErrorTextFormat",[e,D]),R.jgrid.isFunction(U[_.p.id].errorTextFormat)?n[1]=U[_.p.id].errorTextFormat.call(_,e,D):n[1]=t+" Status: '"+e.statusText+"'. Error code: "+e.status):(n=void 0===(n=R(_).triggerHandler("jqGridAddEditAfterSubmit",[e,m,D]))?[!0,"",""]:n)[0]&&R.jgrid.isFunction(U[_.p.id].afterSubmit)&&(n=U[_.p.id].afterSubmit.call(_,e,m,D)),!1===n[0])R(".FormError",x).html(n[1]),R(".FormError",x).show();else if(_.p.autoencode&&R.each(m,function(e,t){m[e]=R.jgrid.htmlDecode(t)}),m[r]===s.addoper?(n[2]||(n[2]=R.jgrid.randId()),null==m[d]||m[d]===_.p.idPrefix+"_empty"||""===m[d]?m[d]=n[2]:n[2]=m[d],U[_.p.id].reloadAfterSubmit?R(_).trigger("reloadGrid"):!0===_.p.treeGrid?R(_).jqGrid("addChildNode",n[2],o,m):R(_).jqGrid("addRowData",n[2],m,M.addedrow),U[_.p.id].closeAfterAdd?(!0!==_.p.treeGrid&&R(_).jqGrid("setSelection",n[2]),R.jgrid.hideModal("#"+R.jgrid.jqID(g.themodal),{gb:"#gbox_"+R.jgrid.jqID(u),jqm:M.jqModal,onClose:U[_.p.id].onClose,removemodal:U[_.p.id].removemodal,formprop:!U[_.p.id].recreateForm,form:U[_.p.id].form})):U[_.p.id].clearAfterAdd&&k("_empty",_,x)):(U[_.p.id].reloadAfterSubmit?(R(_).trigger("reloadGrid"),U[_.p.id].closeAfterEdit||setTimeout(function(){R(_).jqGrid("setSelection",m[d])},1e3)):!0===_.p.treeGrid?R(_).jqGrid("setTreeRow",m[d],m):R(_).jqGrid("setRowData",m[d],m),U[_.p.id].closeAfterEdit&&R.jgrid.hideModal("#"+R.jgrid.jqID(g.themodal),{gb:"#gbox_"+R.jgrid.jqID(u),jqm:M.jqModal,onClose:U[_.p.id].onClose,removemodal:U[_.p.id].removemodal,formprop:!U[_.p.id].recreateForm,form:U[_.p.id].form})),(R.jgrid.isFunction(U[_.p.id].afterComplete)||Object.prototype.hasOwnProperty.call(R._data(R(_)[0],"events"),"jqGridAddEditAfterComplete"))&&(a=e,setTimeout(function(){R(_).triggerHandler("jqGridAddEditAfterComplete",[a,m,R(x),D]);try{U[_.p.id].afterComplete.call(_,a,m,R(x),D)}catch(e){}a=null},500)),(U[_.p.id].checkOnSubmit||U[_.p.id].checkOnUpdate)&&(R(x).data("disabled",!1),"_empty"!==_.p.savedData[_.p.id+"_id"]))for(var i in _.p.savedData)_.p.savedData.hasOwnProperty(i)&&m[i]&&(_.p.savedData[i]=m[i]);U[_.p.id].processing=!1;try{R(":input:visible",x)[0].focus()}catch(e){}}},R.jgrid.ajaxOptions,U[_.p.id].ajaxEditOptions);p.url||U[_.p.id].useDataProxy||(R.jgrid.isFunction(_.p.dataProxy)?U[_.p.id].useDataProxy=!0:(n[0]=!1,n[1]+=" "+f.nourl)),n[0]&&(U[_.p.id].useDataProxy?!1===(c=void 0===(c=_.p.dataProxy.call(_,p,"set_"+_.p.id))?[!0,""]:c)[0]?(n[0]=!1,n[1]=c[1]||"Error deleting the selected row!"):(p.data.oper===s.addoper&&U[_.p.id].closeAfterAdd&&R.jgrid.hideModal("#"+R.jgrid.jqID(g.themodal),{gb:"#gbox_"+R.jgrid.jqID(u),jqm:M.jqModal,onClose:U[_.p.id].onClose,removemodal:U[_.p.id].removemodal,formprop:!U[_.p.id].recreateForm,form:U[_.p.id].form}),p.data.oper===s.editoper&&U[_.p.id].closeAfterEdit&&R.jgrid.hideModal("#"+R.jgrid.jqID(g.themodal),{gb:"#gbox_"+R.jgrid.jqID(u),jqm:M.jqModal,onClose:U[_.p.id].onClose,removemodal:U[_.p.id].removemodal,formprop:!U[_.p.id].recreateForm,form:U[_.p.id].form})):"clientArray"===p.url?(U[_.p.id].reloadAfterSubmit=!1,m=p.data,p.complete({status:200,statusText:""},"")):R.ajax(p))}!1===n[0]&&(R(x).scrollTop(0),R(".FormError",x).html(n[1]),R(".FormError",x).show())}}function F(e,t){var i,a=!1;if(!(a=!(R.isPlainObject(e)&&R.isPlainObject(t)&&Object.getOwnPropertyNames(e).length===Object.getOwnPropertyNames(t).length)))for(i in t)if(t.hasOwnProperty(i)){if(!e.hasOwnProperty(i)){a=!0;break}if(e[i]!==t[i]){a=!0;break}}return a}function G(){var e=!0;return R(".FormError",x).hide(),U[_.p.id].checkOnUpdate&&(m={},I(),F(m,_.p.savedData)&&(R(x).data("disabled",!0),R(".confirm","#"+g.themodal).show(),e=!1)),e}function O(e,t){var i=t[1].length-1;0===e||void 0!==t[1][e-1]&&R("#"+R.jgrid.jqID(t[1][e-1])).hasClass(B.disabled)?R("#pData",w).addClass(B.disabled):R("#pData",w).removeClass(B.disabled),e===i||void 0!==t[1][e+1]&&R("#"+R.jgrid.jqID(t[1][e+1])).hasClass(B.disabled)?R("#nData",w).addClass(B.disabled):R("#nData",w).removeClass(B.disabled)}function S(){var e=R(_).jqGrid("getDataIDs"),t=R("#id_g",h).val();if(_.p.multiselect&&U[_.p.id].editselected){for(var i=[],a=0,d=e.length;a<d;a++)-1!==R.inArray(e[a],_.p.selarrrow)&&i.push(e[a]);return[R.inArray(t,i),i]}return[R.inArray(t,e),e]}function P(){if(U[_.p.id].checkOnSubmit||U[_.p.id].checkOnUpdate){var e,t,i=[],a={},i=R.map(_.p.savedData,function(e,t){return t});for(e in R(".FormElement",q).each(function(){if(""!==R.jgrid.trim(this.name)&&-1===i.indexOf(this.name)){var e=R(this).val(),t=R(this).get(0).type;if("checkbox"===t)R(this).is(":checked")||(e=R(this).attr("offval"));else if("select-multiple"===t)e=e.join(",");else if("radio"===t){if(a.hasOwnProperty(this.name))return!0;a[this.name]=void 0===R(this).attr("offval")?"off":R(this).attr("offval")}_.p.savedData[this.name]=e}}),a)a.hasOwnProperty(e)&&(t=R('input[name="'+e+'"]:checked',q).val(),_.p.savedData[e]=void 0!==t?t:a[e])}}_.grid&&E&&(_.p.savedData={},u=_.p.id,x="FrmGrid_"+u,s="TblGrid_"+u,h="#"+R.jgrid.jqID(s),g={themodal:"editmod"+u,modalhead:"edithd"+u,modalcontent:"editcnt"+u,scrollelm:x},v=!0,t=1,i=0,y="string"==typeof U[_.p.id].template&&0<U[_.p.id].template.length,f=R.jgrid.getRegional(this,"errors"),U[_.p.id].styleUI=_.p.styleUI||"jQueryUI",R.jgrid.isMobile()&&(U[_.p.id].resize=!1),"new"===E?(E="_empty",D="add",M.caption=U[_.p.id].addCaption):(M.caption=U[_.p.id].editCaption,D="edit"),M.recreateForm||R(_).data("formProp")&&R.extend(U[R(this)[0].p.id],R(_).data("formProp")),b=!0,M.checkOnUpdate&&M.jqModal&&!M.modal&&(b=!1),j=isNaN(U[R(this)[0].p.id].dataheight)?U[R(this)[0].p.id].dataheight:U[R(this)[0].p.id].dataheight+"px",c=isNaN(U[R(this)[0].p.id].datawidth)?U[R(this)[0].p.id].datawidth:U[R(this)[0].p.id].datawidth+"px",q=R("<form name='FormPost' id='"+x+"' class='FormGrid' onSubmit='return false;' style='width:"+c+";height:"+j+";'></form>").data("disabled",!1),w=y?(e=U[R(this)[0].p.id].template,d="",a=d="string"==typeof e?e.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(e,t){return'<span id="'+t+'" ></span>'}):d,h):(a=R("<table id='"+s+"' class='EditTable ui-common-table'><tbody></tbody></table>"),h+"_2"),x="#"+R.jgrid.jqID(x),R(q).append("<div class='FormError "+B.error+"' style='display:none;'></div>"),R(q).append("<div class='tinfo topinfo'>"+U[_.p.id].topinfo+"</div>"),R(_.p.colModel).each(function(){var e=this.formoptions;t=Math.max(t,e&&e.colpos||0),i=Math.max(i,e&&e.rowpos||0)}),R(q).append(a),!1!==(v=(v=void 0===(v=R(_).triggerHandler("jqGridAddEditBeforeInitData",[q,D]))?!0:v)&&R.jgrid.isFunction(U[_.p.id].beforeInitData)?U[_.p.id].beforeInitData.call(_,q,D):v)&&(function(){var e;if("_empty"!==E&&void 0!==_.p.savedRow&&0<_.p.savedRow.length&&R.jgrid.isFunction(R.fn.jqGrid.restoreRow))for(e=0;e<_.p.savedRow.length;e++)if(_.p.savedRow[e].id===E){R(_).jqGrid("restoreRow",E);break}}(),function(o,n,l,s){for(var c,p,u,h,g,m,f,e,j=0,v=[],b=!1,w="",t=1;t<=s;t++)w+="<td class='CaptionTD'></td><td class='DataTD'></td>";"_empty"!==o&&(b=R(n).jqGrid("getInd",o)),R(n.p.colModel).each(function(t){if(c=this.name,p=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden,g=p?"style='display:none'":"","cb"!==c&&"subgrid"!==c&&!0===this.editable&&"rn"!==c&&"sc"!==c){if(!1===b)h="";else if(c===n.p.ExpandColumn&&!0===n.p.treeGrid)h=R("td[role='gridcell']",n.rows[b]).eq(t).text();else{try{h=R.unformat.call(n,R("td[role='gridcell']",n.rows[b]).eq(t),{rowId:o,colModel:this},t)}catch(e){h=this.edittype&&"textarea"===this.edittype?R("td[role='gridcell']",n.rows[b]).eq(t).text():R("td[role='gridcell']",n.rows[b]).eq(t).html()}h&&"&nbsp;"!==h&&"&#160;"!==h&&(1!==h.length||160!==h.charCodeAt(0))||(h="")}var e,i=R.extend({},this.editoptions||{},{id:c,name:c,rowId:o,oper:D,module:"form",checkUpdate:U[_.p.id].checkOnSubmit||U[_.p.id].checkOnUpdate}),a=R.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),d=parseInt(a.rowpos,10)||j+1,r=parseInt(2*(parseInt(a.colpos,10)||1),10);"_empty"===o&&i.defaultValue&&(h=R.jgrid.isFunction(i.defaultValue)?i.defaultValue.call(_):i.defaultValue),this.edittype||(this.edittype="text"),_.p.autoencode&&(h=R.jgrid.htmlDecode(h)),m=R.jgrid.createEl.call(_,this.edittype,i,h,!1,R.extend({},R.jgrid.ajaxOptions,n.p.ajaxSelectOptions||{})),"select"===this.edittype&&(h=R(m).val(),"select-multiple"===R(m).get(0).type&&h&&(h=h.join(","))),"checkbox"===this.edittype&&(h=R(m).is(":checked")?R(m).val():R(m).attr("offval")),R(m).addClass("FormElement"),"select"===this.edittype?R(m).addClass(A.selectClass):-1<R.inArray(this.edittype,["text","textarea","password","color","date","datetime","datetime-local","email","month","number","range","search","tel","time","url","week"])&&R(m).addClass(A.inputClass),f=!0,y?(e=R(q).find("#"+c)).length?e.replaceWith(m):f=!1:(u=R(l).find("tr[rowpos="+d+"]"),a.rowabove&&(e=R("<tr><td class='contentinfo' colspan='"+2*s+"'>"+a.rowcontent+"</td></tr>"),R(l).append(e),e[0].rp=d),0===u.length&&(u=R(1<s?"<tr rowpos='"+d+"'></tr>":"<tr "+g+" rowpos='"+d+"'></tr>").addClass("FormData").attr("id","tr_"+c),R(u).append(w),R(l).append(u),u[0].rp=d),R("td",u[0]).eq(r-2).html("<label for='"+c+"'>"+(void 0===a.label?n.p.colNames[t]:a.label)+"</label>"),R("td",u[0]).eq(r-1).append(a.elmprefix).append(m).append(a.elmsuffix),1<s&&p&&(R("td",u[0]).eq(r-2).hide(),R("td",u[0]).eq(r-1).hide())),(U[_.p.id].checkOnSubmit||U[_.p.id].checkOnUpdate)&&f&&(_.p.savedData[c]=h),"custom"===this.edittype&&R.jgrid.isFunction(i.custom_value)&&i.custom_value.call(_,R("#"+c,m),"set",h),R.jgrid.bindEv.call(_,m,i),v[j]=t,j++}}),0<j&&(y?(e="<div class='FormData' style='display:none'><input class='FormElement' id='id_g' type='text' name='"+n.p.id+"_id' value='"+o+"'/>",R(q).append(e)):((e=R("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*s-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+n.p.id+"_id' value='"+o+"'/></td></tr>"))[0].rp=j+999,R(l).append(e)),(U[_.p.id].checkOnSubmit||U[_.p.id].checkOnUpdate)&&(_.p.savedData[n.p.id+"_id"]=o))}(E,_,a,t),l="<a id='"+((r="rtl"===_.p.direction)?"nData":"pData")+"' class='fm-button "+B.button+"'><span class='"+B.icon_base+" "+A.icon_prev+"'></span></a>",p="<a id='"+(r?"pData":"nData")+"' class='fm-button "+B.button+"'><span class='"+B.icon_base+" "+A.icon_next+"'></span></a>",c="<a id='sData' class='fm-button "+B.button+"'>"+M.bSubmit+"</a>",j="<a id='cData' class='fm-button "+B.button+"'>"+M.bCancel+"</a>",v=Array.isArray(U[_.p.id].buttons)?R.jgrid.buildButtons(U[_.p.id].buttons,c+j,B):c+j,v="<table style='height:auto' class='EditTable ui-common-table' id='"+s+"_2'><tbody><tr><td colspan='2'><hr class='"+B.content+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(r?p+l:l+p)+"</td><td class='EditButton'>"+v+"</td></tr>",v+="</tbody></table>",0<i&&(o=[],R.each(R(a)[0].rows,function(e,t){o[e]=t}),o.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),R.each(o,function(e,t){R("tbody",a).append(t)})),M.gbox="#gbox_"+R.jgrid.jqID(u),!(n=!1)===M.closeOnEscape&&(M.closeOnEscape=!1,n=!0),l=y?(R(q).find("#pData").replaceWith(l),R(q).find("#nData").replaceWith(p),R(q).find("#sData").replaceWith(c),R(q).find("#cData").replaceWith(j),R("<div id="+s+"></div>").append(q)):R("<div></div>").append(q).append(v),R(q).append("<div class='binfo topinfo bottominfo'>"+U[_.p.id].bottominfo+"</div>"),s=R(".ui-jqgrid").css("font-size")||"11px",R.jgrid.createModal(g,l,U[R(this)[0].p.id],"#gview_"+R.jgrid.jqID(_.p.id),R("#gbox_"+R.jgrid.jqID(_.p.id))[0],null,{"font-size":s}),r&&(R("#pData, #nData",h+"_2").css("float","right"),R(".EditButton",h+"_2").css("text-align","left")),U[_.p.id].topinfo&&R(".tinfo",x).show(),U[_.p.id].bottominfo&&R(".binfo",x).show(),v=l=null,R("#"+R.jgrid.jqID(g.themodal)).keydown(function(e){var t=e.target;return!0!==R(x).data("disabled")&&(!0===U[_.p.id].savekey[0]&&e.which===U[_.p.id].savekey[1]&&"TEXTAREA"!==t.tagName?(R("#sData",h+"_2").trigger("click"),!1):27===e.which?(G()&&n&&R.jgrid.hideModal("#"+R.jgrid.jqID(g.themodal),{gb:M.gbox,jqm:M.jqModal,onClose:U[_.p.id].onClose,removemodal:U[_.p.id].removemodal,formprop:!U[_.p.id].recreateForm,form:U[_.p.id].form}),!1):!0===U[_.p.id].navkeys[0]?"_empty"===R("#id_g",h).val()||(e.which===U[_.p.id].navkeys[1]?(R("#pData",w).trigger("click"),!1):e.which===U[_.p.id].navkeys[2]?(R("#nData",w).trigger("click"),!1):void 0):void 0)}),M.checkOnUpdate&&(R("a.ui-jqdialog-titlebar-close span","#"+R.jgrid.jqID(g.themodal)).removeClass("jqmClose"),R("a.ui-jqdialog-titlebar-close","#"+R.jgrid.jqID(g.themodal)).off("click").click(function(){return G()&&R.jgrid.hideModal("#"+R.jgrid.jqID(g.themodal),{gb:"#gbox_"+R.jgrid.jqID(u),jqm:M.jqModal,onClose:U[_.p.id].onClose,removemodal:U[_.p.id].removemodal,formprop:!U[_.p.id].recreateForm,form:U[_.p.id].form}),!1})),M.saveicon=R.extend([!0,"left",A.icon_save],M.saveicon),M.closeicon=R.extend([!0,"left",A.icon_close],M.closeicon),!0===M.saveicon[0]&&R("#sData",w).addClass("right"===M.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+B.icon_base+" "+M.saveicon[2]+"'></span>"),!0===M.closeicon[0]&&R("#cData",w).addClass("right"===M.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+B.icon_base+" "+M.closeicon[2]+"'></span>"),(U[_.p.id].checkOnSubmit||U[_.p.id].checkOnUpdate)&&(c="<a id='sNew' class='fm-button "+B.button+"' style='z-index:1002'>"+M.bYes+"</a>",p="<a id='nNew' class='fm-button "+B.button+"' style='z-index:1002;margin-left:5px'>"+M.bNo+"</a>",j="<a id='cNew' class='fm-button "+B.button+"' style='z-index:1002;margin-left:5px;'>"+M.bExit+"</a>",v=M.zIndex||999,v++,R("#"+g.themodal).append("<div class='"+M.overlayClass+" jqgrid-overlay confirm' style='z-index:"+v+";display:none;position:absolute;'>&#160;</div><div class='confirm ui-jqconfirm "+B.content+"' style='z-index:"+(1+v)+"'>"+M.saveData+"<br/><br/>"+c+p+j+"</div>"),R("#sNew","#"+R.jgrid.jqID(g.themodal)).click(function(){return C(),R(x).data("disabled",!1),R(".confirm","#"+R.jgrid.jqID(g.themodal)).hide(),!1}),R("#nNew","#"+R.jgrid.jqID(g.themodal)).click(function(){return R(".confirm","#"+R.jgrid.jqID(g.themodal)).hide(),R(x).data("disabled",!1),setTimeout(function(){R(":input:visible",x)[0].focus()},0),!1}),R("#cNew","#"+R.jgrid.jqID(g.themodal)).click(function(){return R(".confirm","#"+R.jgrid.jqID(g.themodal)).hide(),R(x).data("disabled",!1),R.jgrid.hideModal("#"+R.jgrid.jqID(g.themodal),{gb:"#gbox_"+R.jgrid.jqID(u),jqm:M.jqModal,onClose:U[_.p.id].onClose,removemodal:U[_.p.id].removemodal,formprop:!U[_.p.id].recreateForm,form:U[_.p.id].form}),!1})),R(_).triggerHandler("jqGridAddEditInitializeForm",[R(x),D]),R.jgrid.isFunction(U[_.p.id].onInitializeForm)&&U[_.p.id].onInitializeForm.call(_,R(x),D),"_empty"!==E&&U[_.p.id].viewPagerButtons?R("#pData,#nData",w).show():R("#pData,#nData",w).hide(),R(_).triggerHandler("jqGridAddEditBeforeShowForm",[R(x),D]),R.jgrid.isFunction(U[_.p.id].beforeShowForm)&&U[_.p.id].beforeShowForm.call(_,R(x),D),P(),R("#"+R.jgrid.jqID(g.themodal)).data("onClose",U[_.p.id].onClose),R.jgrid.viewModal("#"+R.jgrid.jqID(g.themodal),{gbox:"#gbox_"+R.jgrid.jqID(u),jqm:M.jqModal,overlay:M.overlay,modal:M.modal,overlayClass:M.overlayClass,focusField:M.focusField,onHide:function(e){var t=R.jgrid.floatNum(R("#editmod"+u)[0].style.width),i="rtl"===R("#gbox_"+R.jgrid.jqID(u)).attr("dir");R(_).data("formProp",{top:R.jgrid.floatNum(R(e.w).css("top")),left:i?R("#gbox_"+R.jgrid.jqID(u)).outerWidth()-t-parseFloat(R(e.w).css("left"))+12:parseFloat(R(e.w).css("left")),width:t,height:R.jgrid.floatNum(R("#editmod"+u)[0].style.height),dataheight:R(x).height(),datawidth:R(x).width()}),e.w.remove(),e.o&&e.o.remove()}}),b||R("."+R.jgrid.jqID(M.overlayClass)).click(function(){return G()&&R.jgrid.hideModal("#"+R.jgrid.jqID(g.themodal),{gb:"#gbox_"+R.jgrid.jqID(u),jqm:M.jqModal,onClose:U[_.p.id].onClose,removemodal:U[_.p.id].removemodal,formprop:!U[_.p.id].recreateForm,form:U[_.p.id].form}),!1}),R(".fm-button","#"+R.jgrid.jqID(g.themodal)).hover(function(){R(this).addClass(B.hover)},function(){R(this).removeClass(B.hover)}),R("#sData",w).click(function(){return m={},R(".FormError",x).hide(),I(),"_empty"!==m[_.p.id+"_id"]&&!0===M.checkOnSubmit&&F(m,_.p.savedData)?(R(x).data("disabled",!0),R(".confirm","#"+R.jgrid.jqID(g.themodal)).show()):C(),!1}),R("#cData",w).click(function(){return G()&&R.jgrid.hideModal("#"+R.jgrid.jqID(g.themodal),{gb:"#gbox_"+R.jgrid.jqID(u),jqm:M.jqModal,onClose:U[_.p.id].onClose,removemodal:U[_.p.id].removemodal,formprop:!U[_.p.id].recreateForm,form:U[_.p.id].form}),!1}),R(w).find("[data-index]").each(function(){var t=parseInt(R(this).attr("data-index"),10);0<=t&&M.buttons[t].hasOwnProperty("click")&&R(this).on("click",function(e){M.buttons[t].click.call(_,R(x)[0],U[_.p.id],e)})}),R("#nData",w).click(function(){if(!G())return!1;R(".FormError",x).hide();var e,t=S();if(t[0]=parseInt(t[0],10),-1!==t[0]&&t[1][t[0]+1]){if(R(_).triggerHandler("jqGridAddEditClickPgButtons",["next",R(x),t[1][t[0]]]),R.jgrid.isFunction(M.onclickPgButtons)&&void 0!==(e=M.onclickPgButtons.call(_,"next",R(x),t[1][t[0]]))&&!1===e)return!1;if(R("#"+R.jgrid.jqID(t[1][t[0]+1])).hasClass(B.disabled))return!1;k(t[1][t[0]+1],_,x),_.p.multiselect&&U[_.p.id].editselected||R(_).jqGrid("setSelection",t[1][t[0]+1]),R(_).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",R(x),t[1][t[0]]]),R.jgrid.isFunction(M.afterclickPgButtons)&&M.afterclickPgButtons.call(_,"next",R(x),t[1][t[0]+1]),P(),O(t[0]+1,t)}return!1}),R("#pData",w).click(function(){if(!G())return!1;R(".FormError",x).hide();var e,t=S();if(-1!==t[0]&&t[1][t[0]-1]){if(R(_).triggerHandler("jqGridAddEditClickPgButtons",["prev",R(x),t[1][t[0]]]),R.jgrid.isFunction(M.onclickPgButtons)&&void 0!==(e=M.onclickPgButtons.call(_,"prev",R(x),t[1][t[0]]))&&!1===e)return!1;if(R("#"+R.jgrid.jqID(t[1][t[0]-1])).hasClass(B.disabled))return!1;k(t[1][t[0]-1],_,x),_.p.multiselect&&U[_.p.id].editselected||R(_).jqGrid("setSelection",t[1][t[0]-1]),R(_).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",R(x),t[1][t[0]]]),R.jgrid.isFunction(M.afterclickPgButtons)&&M.afterclickPgButtons.call(_,"prev",R(x),t[1][t[0]-1]),P(),O(t[0]-1,t)}return!1}),R(_).triggerHandler("jqGridAddEditAfterShowForm",[R(x),D]),R.jgrid.isFunction(U[_.p.id].afterShowForm)&&U[_.p.id].afterShowForm.call(_,R(x),D),O((b=S())[0],b)))})},viewGridRow:function(b,D){var e=R.jgrid.getRegional(this[0],"view"),t=this[0].p.styleUI,w=R.jgrid.styleUI[t].formedit,y=R.jgrid.styleUI[t].common;return D=R.extend(!0,{top:0,left:0,width:500,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"auto",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1,removemodal:!0,form:"view",buttons:[]},e,D||{}),U[R(this)[0].p.id]=D,this.each(function(){var a,d,n,i,t,r,o,e,l,s,c,p,u,h,g=this;function m(){!0!==U[g.p.id].closeOnEscape&&!0!==U[g.p.id].navkeys[0]||setTimeout(function(){R(".ui-jqdialog-titlebar-close","#"+R.jgrid.jqID(t.modalhead)).attr("tabindex","-1").focus()},0)}function f(e,t){var i,a,d,r=0,o=R(t).jqGrid("getInd",e,!0);o&&(R("td",o).each(function(e){i=t.p.colModel[e].name,a=(!t.p.colModel[e].editrules||!0!==t.p.colModel[e].editrules.edithidden)&&!0===t.p.colModel[e].hidden,"cb"!==i&&"subgrid"!==i&&"rn"!==i&&"sc"!==i&&(d=i===t.p.ExpandColumn&&!0===t.p.treeGrid?R(this).text():R(this).html(),i=R.jgrid.jqID("v_"+i),R("#"+i+" span","#"+n).html(d),a&&R("#"+i,"#"+n).parents("tr").first().hide(),r++)}),0<r&&R("#id_g","#"+n).val(e))}function j(e,t){var i=t[1].length-1;0===e?R("#pData","#"+n+"_2").addClass(y.disabled):void 0!==t[1][e-1]&&R("#"+R.jgrid.jqID(t[1][e-1])).hasClass(y.disabled)?R("#pData",n+"_2").addClass(y.disabled):R("#pData","#"+n+"_2").removeClass(y.disabled),e===i?R("#nData","#"+n+"_2").addClass(y.disabled):void 0!==t[1][e+1]&&R("#"+R.jgrid.jqID(t[1][e+1])).hasClass(y.disabled)?R("#nData",n+"_2").addClass(y.disabled):R("#nData","#"+n+"_2").removeClass(y.disabled)}function v(){var e=R(g).jqGrid("getDataIDs"),t=R("#id_g","#"+n).val();if(g.p.multiselect&&U[g.p.id].viewselected){for(var i=[],a=0,d=e.length;a<d;a++)-1!==R.inArray(e[a],g.p.selarrrow)&&i.push(e[a]);return[R.inArray(t,i),i]}return[R.inArray(t,e),e]}g.grid&&b&&(a=g.p.id,d="ViewGrid_"+R.jgrid.jqID(a),n="ViewTbl_"+R.jgrid.jqID(a),i="ViewGrid_"+a,h="ViewTbl_"+a,t={themodal:"viewmod"+a,modalhead:"viewhd"+a,modalcontent:"viewcnt"+a,scrollelm:d},u=!0,r=1,o=0,U[g.p.id].styleUI=g.p.styleUI||"jQueryUI",D.recreateForm||R(g).data("viewProp")&&R.extend(U[R(this)[0].p.id],R(g).data("viewProp")),c=isNaN(U[R(this)[0].p.id].dataheight)?U[R(this)[0].p.id].dataheight:U[R(this)[0].p.id].dataheight+"px",s=isNaN(U[R(this)[0].p.id].datawidth)?U[R(this)[0].p.id].datawidth:U[R(this)[0].p.id].datawidth+"px",e=R("<form name='FormPost' id='"+i+"' class='FormGrid' style='width:"+s+";height:"+c+";'></form>"),l=R("<table id='"+h+"' class='EditTable ViewTable'><tbody></tbody></table>"),R(g.p.colModel).each(function(){var e=this.formoptions;r=Math.max(r,e&&e.colpos||0),o=Math.max(o,e&&e.rowpos||0)}),R(e).append(l),!1!==(u=(u=void 0===(u=R(g).triggerHandler("jqGridViewRowBeforeInitData",[e]))?!0:u)&&R.jgrid.isFunction(U[g.p.id].beforeInitData)?U[g.p.id].beforeInitData.call(g,e):u)&&(function(e,r,o,n){for(var l,s,c,p,u,h,g,m,f=0,j=[],t="<td class='CaptionTD form-view-label "+y.content+"' width='"+D.labelswidth+"'></td><td class='DataTD form-view-data ui-helper-reset "+y.content+"'></td>",v="",i="<td class='CaptionTD form-view-label "+y.content+"'></td><td class='DataTD form-view-data "+y.content+"'></td>",a=["integer","number","currency"],d=0,b=0,w=1;w<=n;w++)v+=1===w?t:i;R(r.p.colModel).each(function(){(s=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden)||"right"!==this.align||(this.formatter&&-1!==R.inArray(this.formatter,a)?d=Math.max(d,parseInt(this.width,10)):b=Math.max(b,parseInt(this.width,10)))}),h=0!==d?d:0!==b?b:0,u=R(r).jqGrid("getInd",e),R(r.p.colModel).each(function(e){var t,i,a,d;l=this.name,s=(!this.editrules||!0!==this.editrules.edithidden)&&!0===this.hidden,p=s?"style='display:none'":"",m="boolean"!=typeof this.viewable||this.viewable,"cb"!==l&&"subgrid"!==l&&"rn"!==l&&m&&"sc"!==l&&(c=!1===u?"":l===r.p.ExpandColumn&&!0===r.p.treeGrid?R("td",r.rows[u]).eq(e).text():R("td",r.rows[u]).eq(e).html(),g="right"===this.align&&0!==h,t=R.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),i=parseInt(t.rowpos,10)||f+1,a=parseInt(2*(parseInt(t.colpos,10)||1),10),t.rowabove&&(d=R("<tr><td class='contentinfo' colspan='"+2*n+"'>"+t.rowcontent+"</td></tr>"),R(o).append(d),d[0].rp=i),0===(m=R(o).find("tr[rowpos="+i+"]")).length&&(m=R("<tr "+p+" rowpos='"+i+"'></tr>").addClass("FormData").attr("id","trv_"+l),R(m).append(v),R(o).append(m),m[0].rp=i),R("td",m[0]).eq(a-2).html("<b>"+(void 0===t.label?r.p.colNames[e]:t.label)+"</b>"),R("td",m[0]).eq(a-1).append("<span>"+c+"</span>").attr("id","v_"+l),g&&R("td",m[0]).eq(a-1).find("span").css({"text-align":"right",width:h+"px"}),j[f]=e,f++)}),0<f&&((e=R("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*n-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+e+"'/></td></tr>"))[0].rp=f+99,R(o).append(e))}(b,g,l,r),c="<a id='"+((s="rtl"===g.p.direction)?"nData":"pData")+"' class='fm-button "+y.button+"'><span class='"+y.icon_base+" "+w.icon_prev+"'></span></a>",h="<a id='"+(s?"pData":"nData")+"' class='fm-button "+y.button+"'><span class='"+y.icon_base+" "+w.icon_next+"'></span></a>",u="<a id='cData' class='fm-button "+y.button+"'>"+D.bClose+"</a>",u=Array.isArray(U[g.p.id].buttons)?R.jgrid.buildButtons(U[g.p.id].buttons,u,y):u,0<o&&(p=[],R.each(R(l)[0].rows,function(e,t){p[e]=t}),p.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),R.each(p,function(e,t){R("tbody",l).append(t)})),D.gbox="#gbox_"+R.jgrid.jqID(a),h=R("<div></div>").append(e).append("<table border='0' class='EditTable' id='"+n+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+D.labelswidth+"'>"+(s?h+c:c+h)+"</td><td class='EditButton'>"+u+"</td></tr></tbody></table>"),u=R(".ui-jqgrid").css("font-size")||"11px",R.jgrid.createModal(t,h,U[R(this)[0].p.id],"#gview_"+R.jgrid.jqID(g.p.id),R("#gview_"+R.jgrid.jqID(g.p.id))[0],null,{"font-size":u}),s&&(R("#pData, #nData","#"+n+"_2").css("float","right"),R(".EditButton","#"+n+"_2").css("text-align","left")),D.viewPagerButtons||R("#pData, #nData","#"+n+"_2").hide(),h=null,R("#"+t.themodal).keydown(function(e){return 27===e.which?(U[g.p.id].closeOnEscape&&R.jgrid.hideModal("#"+R.jgrid.jqID(t.themodal),{gb:D.gbox,jqm:D.jqModal,onClose:D.onClose,removemodal:U[g.p.id].removemodal,formprop:!U[g.p.id].recreateForm,form:U[g.p.id].form}),!1):!0===D.navkeys[0]?e.which===D.navkeys[1]?(R("#pData","#"+n+"_2").trigger("click"),!1):e.which===D.navkeys[2]?(R("#nData","#"+n+"_2").trigger("click"),!1):void 0:void 0}),D.closeicon=R.extend([!0,"left",w.icon_close],D.closeicon),!0===D.closeicon[0]&&R("#cData","#"+n+"_2").addClass("right"===D.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+y.icon_base+" "+D.closeicon[2]+"'></span>"),R(g).triggerHandler("jqGridViewRowBeforeShowForm",[R("#"+d)]),R.jgrid.isFunction(D.beforeShowForm)&&D.beforeShowForm.call(g,R("#"+d)),R.jgrid.viewModal("#"+R.jgrid.jqID(t.themodal),{gbox:"#gbox_"+R.jgrid.jqID(a),jqm:D.jqModal,overlay:D.overlay,modal:D.modal,onHide:function(e){var t="rtl"===R("#gbox_"+R.jgrid.jqID(a)).attr("dir"),i=parseFloat(R("#viewmod"+a)[0].style.width);R(g).data("viewProp",{top:parseFloat(R(e.w).css("top")),left:t?R("#gbox_"+R.jgrid.jqID(a)).outerWidth()-i-parseFloat(R(e.w).css("left"))+12:parseFloat(R(e.w).css("left")),width:R(e.w).width(),height:R(e.w).height(),dataheight:R("#"+d).height(),datawidth:R("#"+d).width()}),e.w.remove(),e.o&&e.o.remove()}}),R(".fm-button:not(."+y.disabled+")","#"+n+"_2").hover(function(){R(this).addClass(y.hover)},function(){R(this).removeClass(y.hover)}),m(),R("#cData","#"+n+"_2").click(function(){return R.jgrid.hideModal("#"+R.jgrid.jqID(t.themodal),{gb:"#gbox_"+R.jgrid.jqID(a),jqm:D.jqModal,onClose:D.onClose,removemodal:U[g.p.id].removemodal,formprop:!U[g.p.id].recreateForm,form:U[g.p.id].form}),!1}),R("#"+n+"_2").find("[data-index]").each(function(){var t=parseInt(R(this).attr("data-index"),10);0<=t&&D.buttons[t].hasOwnProperty("click")&&R(this).on("click",function(e){D.buttons[t].click.call(g,R("#"+i)[0],U[g.p.id],e)})}),R("#nData","#"+n+"_2").click(function(){R("#FormError","#"+n).hide();var e=v();return e[0]=parseInt(e[0],10),-1!==e[0]&&e[1][e[0]+1]&&(R(g).triggerHandler("jqGridViewRowClickPgButtons",["next",R("#"+d),e[1][e[0]]]),R.jgrid.isFunction(D.onclickPgButtons)&&D.onclickPgButtons.call(g,"next",R("#"+d),e[1][e[0]]),f(e[1][e[0]+1],g),g.p.multiselect&&U[g.p.id].viewselected||R(g).jqGrid("setSelection",e[1][e[0]+1]),R(g).triggerHandler("jqGridViewRowAfterClickPgButtons",["next",R("#"+d),e[1][e[0]+1]]),R.jgrid.isFunction(D.afterclickPgButtons)&&D.afterclickPgButtons.call(g,"next",R("#"+d),e[1][e[0]+1]),j(e[0]+1,e)),m(),!1}),R("#pData","#"+n+"_2").click(function(){R("#FormError","#"+n).hide();var e=v();return-1!==e[0]&&e[1][e[0]-1]&&(R(g).triggerHandler("jqGridViewRowClickPgButtons",["prev",R("#"+d),e[1][e[0]]]),R.jgrid.isFunction(D.onclickPgButtons)&&D.onclickPgButtons.call(g,"prev",R("#"+d),e[1][e[0]]),f(e[1][e[0]-1],g),g.p.multiselect&&U[g.p.id].viewselected||R(g).jqGrid("setSelection",e[1][e[0]-1]),R(g).triggerHandler("jqGridViewRowAfterClickPgButtons",["prev",R("#"+d),e[1][e[0]-1]]),R.jgrid.isFunction(D.afterclickPgButtons)&&D.afterclickPgButtons.call(g,"prev",R("#"+d),e[1][e[0]-1]),j(e[0]-1,e)),m(),!1}),j((h=v())[0],h)))})},delGridRow:function(h,g){var e=R.jgrid.getRegional(this[0],"del"),t=this[0].p.styleUI,m=R.jgrid.styleUI[t].formedit,f=R.jgrid.styleUI[t].common;return g=R.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},e,g||{}),U[R(this)[0].p.id]=g,this.each(function(){var o=this;if(o.grid&&h){var n,a,l,s=o.p.id,c={},e=!0,p="DelTbl_"+R.jgrid.jqID(s),i="DelTbl_"+s,u={themodal:"delmod"+s,modalhead:"delhd"+s,modalcontent:"delcnt"+s,scrollelm:p};if(U[o.p.id].styleUI=o.p.styleUI||"jQueryUI",Array.isArray(h)&&(h=h.join()),void 0!==R("#"+R.jgrid.jqID(u.themodal))[0]){if(!1===(e=(e=void 0===(e=R(o).triggerHandler("jqGridDelRowBeforeInitData",[R("#"+p)]))?!0:e)&&R.jgrid.isFunction(U[o.p.id].beforeInitData)?U[o.p.id].beforeInitData.call(o,R("#"+p)):e))return;R("#DelData>td","#"+p).text(h),R("#DelError","#"+p).hide(),!0===U[o.p.id].processing&&(U[o.p.id].processing=!1,R("#dData","#"+p).removeClass(f.active)),R(o).triggerHandler("jqGridDelRowBeforeShowForm",[R("#"+p)]),R.jgrid.isFunction(U[o.p.id].beforeShowForm)&&U[o.p.id].beforeShowForm.call(o,R("#"+p)),R.jgrid.viewModal("#"+R.jgrid.jqID(u.themodal),{gbox:"#gbox_"+R.jgrid.jqID(s),jqm:U[o.p.id].jqModal,overlay:U[o.p.id].overlay,modal:U[o.p.id].modal}),R(o).triggerHandler("jqGridDelRowAfterShowForm",[R("#"+p)]),R.jgrid.isFunction(U[o.p.id].afterShowForm)&&U[o.p.id].afterShowForm.call(o,R("#"+p))}else{var t=isNaN(U[o.p.id].dataheight)?U[o.p.id].dataheight:U[o.p.id].dataheight+"px",d=isNaN(g.datawidth)?g.datawidth:g.datawidth+"px",r="<div id='"+i+"' class='formdata' style='width:"+d+";overflow:auto;position:relative;height:"+t+";'>";r+="<table class='DelTable'><tbody>",r+="<tr id='DelError' style='display:none'><td class='"+f.error+"'></td></tr>",r+="<tr id='DelData' style='display:none'><td >"+h+"</td></tr>",r+='<tr><td class="delmsg" style="white-space:pre;">'+U[o.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>",r+="</tbody></table></div>";d="<a id='dData' class='fm-button "+f.button+"'>"+g.bSubmit+"</a>",t="<a id='eData' class='fm-button "+f.button+"'>"+g.bCancel+"</a>",d=Array.isArray(U[o.p.id].buttons)?R.jgrid.buildButtons(U[o.p.id].buttons,d+t,f):d+t,t=R(".ui-jqgrid").css("font-size")||"11px";if(r+="<table class='EditTable ui-common-table' id='"+p+"_2'><tbody><tr><td><hr class='"+f.content+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+d+"</td></tr></tbody></table>",g.gbox="#gbox_"+R.jgrid.jqID(s),R.jgrid.createModal(u,r,U[o.p.id],"#gview_"+R.jgrid.jqID(o.p.id),R("#gview_"+R.jgrid.jqID(o.p.id))[0],null,{"font-size":t}),R(".fm-button","#"+p+"_2").hover(function(){R(this).addClass(f.hover)},function(){R(this).removeClass(f.hover)}),g.delicon=R.extend([!0,"left",m.icon_del],U[o.p.id].delicon),g.cancelicon=R.extend([!0,"left",m.icon_cancel],U[o.p.id].cancelicon),!0===g.delicon[0]&&R("#dData","#"+p+"_2").addClass("right"===g.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+f.icon_base+" "+g.delicon[2]+"'></span>"),!0===g.cancelicon[0]&&R("#eData","#"+p+"_2").addClass("right"===g.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+f.icon_base+" "+g.cancelicon[2]+"'></span>"),R("#dData","#"+p+"_2").click(function(){var e,d=[!0,""],r=R("#DelData>td","#"+p).text();if(c={},void 0===(c=R(o).triggerHandler("jqGridDelRowClickSubmit",[U[o.p.id],r]))&&R.jgrid.isFunction(U[o.p.id].onclickSubmit)&&(c=U[o.p.id].onclickSubmit.call(o,U[o.p.id],r)||{}),(d=(d=void 0===(d=R(o).triggerHandler("jqGridDelRowBeforeSubmit",[r]))?[!0,"",""]:d)[0]&&R.jgrid.isFunction(U[o.p.id].beforeSubmit)?U[o.p.id].beforeSubmit.call(o,r):d)[0]&&!U[o.p.id].processing){if(U[o.p.id].processing=!0,a=o.p.prmNames,n=R.extend({},U[o.p.id].delData,c),l=a.oper,n[l]=a.deloper,a=a.id,!(r=String(r).split(",")).length)return!1;for(e in r)r.hasOwnProperty(e)&&(r[e]=R.jgrid.stripPref(o.p.idPrefix,r[e]));n[a]=r.join(),R(this).addClass(f.active);var t,i=R.extend({url:U[o.p.id].url||R(o).jqGrid("getGridParam","editurl"),type:U[o.p.id].mtype,data:R.jgrid.isFunction(U[o.p.id].serializeDelData)?U[o.p.id].serializeDelData.call(o,n):n,complete:function(e,t){var i,a;if(R("#dData","#"+p+"_2").removeClass(f.active),300<=e.status&&304!==e.status?(d[0]=!1,d[1]=R(o).triggerHandler("jqGridDelRowErrorTextFormat",[e]),R.jgrid.isFunction(U[o.p.id].errorTextFormat)&&(d[1]=U[o.p.id].errorTextFormat.call(o,e)),void 0===d[1]&&(d[1]=t+" Status: '"+e.statusText+"'. Error code: "+e.status)):(d=void 0===(d=R(o).triggerHandler("jqGridDelRowAfterSubmit",[e,n]))?[!0,"",""]:d)[0]&&R.jgrid.isFunction(U[o.p.id].afterSubmit)&&(d=U[o.p.id].afterSubmit.call(o,e,n)),!1===d[0])R("#DelError>td","#"+p).html(d[1]),R("#DelError","#"+p).show();else{if(U[o.p.id].reloadAfterSubmit&&"local"!==o.p.datatype)R(o).trigger("reloadGrid");else{if(!0===o.p.treeGrid)try{R(o).jqGrid("delTreeNode",o.p.idPrefix+r[0])}catch(e){}else for(i=0;i<r.length;i++)R(o).jqGrid("delRowData",o.p.idPrefix+r[i]);o.p.selrow=null,o.p.selarrrow=[]}(R.jgrid.isFunction(U[o.p.id].afterComplete)||Object.prototype.hasOwnProperty.call(R._data(R(o)[0],"events"),"jqGridDelRowAfterComplete"))&&(a=e,setTimeout(function(){R(o).triggerHandler("jqGridDelRowAfterComplete",[a,n]);try{U[o.p.id].afterComplete.call(o,a,n)}catch(e){}},500))}U[o.p.id].processing=!1,d[0]&&R.jgrid.hideModal("#"+R.jgrid.jqID(u.themodal),{gb:"#gbox_"+R.jgrid.jqID(s),jqm:g.jqModal,onClose:U[o.p.id].onClose})}},R.jgrid.ajaxOptions,U[o.p.id].ajaxDelOptions);i.url||U[o.p.id].useDataProxy||(R.jgrid.isFunction(o.p.dataProxy)?U[o.p.id].useDataProxy=!0:(d[0]=!1,d[1]+=" "+R.jgrid.getRegional(o,"errors.nourl"))),d[0]&&(U[o.p.id].useDataProxy?!1===(t=void 0===(t=o.p.dataProxy.call(o,i,"del_"+o.p.id))?[!0,""]:t)[0]?(d[0]=!1,d[1]=t[1]||"Error deleting the selected row!"):R.jgrid.hideModal("#"+R.jgrid.jqID(u.themodal),{gb:"#gbox_"+R.jgrid.jqID(s),jqm:g.jqModal,onClose:U[o.p.id].onClose}):"clientArray"===i.url?(n=i.data,i.complete({status:200,statusText:""},"")):R.ajax(i))}return!1===d[0]&&(R("#DelError>td","#"+p).html(d[1]),R("#DelError","#"+p).show()),!1}),R("#eData","#"+p+"_2").click(function(){return R.jgrid.hideModal("#"+R.jgrid.jqID(u.themodal),{gb:"#gbox_"+R.jgrid.jqID(s),jqm:U[o.p.id].jqModal,onClose:U[o.p.id].onClose}),!1}),R("#"+p+"_2").find("[data-index]").each(function(){var t=parseInt(R(this).attr("data-index"),10);0<=t&&g.buttons[t].hasOwnProperty("click")&&R(this).on("click",function(e){g.buttons[t].click.call(o,R("#"+i)[0],U[o.p.id],e)})}),!1===(e=(e=void 0===(e=R(o).triggerHandler("jqGridDelRowBeforeInitData",[R("#"+p)]))?!0:e)&&R.jgrid.isFunction(U[o.p.id].beforeInitData)?U[o.p.id].beforeInitData.call(o,R("#"+p)):e))return;R(o).triggerHandler("jqGridDelRowBeforeShowForm",[R("#"+p)]),R.jgrid.isFunction(U[o.p.id].beforeShowForm)&&U[o.p.id].beforeShowForm.call(o,R("#"+p)),R.jgrid.viewModal("#"+R.jgrid.jqID(u.themodal),{gbox:"#gbox_"+R.jgrid.jqID(s),jqm:U[o.p.id].jqModal,overlay:U[o.p.id].overlay,modal:U[o.p.id].modal}),R(o).triggerHandler("jqGridDelRowAfterShowForm",[R("#"+p)]),R.jgrid.isFunction(U[o.p.id].afterShowForm)&&U[o.p.id].afterShowForm.call(o,R("#"+p))}!0===U[o.p.id].closeOnEscape&&setTimeout(function(){R(".ui-jqdialog-titlebar-close","#"+R.jgrid.jqID(u.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(g,m,f,j,v,b,w){var D=R.jgrid.getRegional(this[0],"nav"),y=this[0].p.styleUI,e=R.jgrid.styleUI[y].navigator,q=R.jgrid.styleUI[y].common;return m=R.extend({edit:!0,editicon:e.icon_edit_nav,add:!0,addicon:e.icon_add_nav,del:!0,delicon:e.icon_del_nav,search:!0,searchicon:e.icon_search_nav,refresh:!0,refreshicon:e.icon_refresh_nav,refreshstate:"firstpage",view:!1,viewicon:e.icon_view_nav,position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null,dropmenu:!1,navButtonText:""},D,m||{}),this.each(function(){if(!this.p.navGrid){var t,e,i,a={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},d=this;if(d.grid&&"string"==typeof g){R(d).data("navGrid")||R(d).data("navGrid",m),t=R(d).data("navGrid"),d.p.force_regional&&(t=R.extend(t,D)),void 0===R("#"+a.themodal)[0]&&(t.alerttop||t.alertleft||((e=R.jgrid.findPos(this))[0]=Math.round(e[0]),e[1]=Math.round(e[1]),0===(i=isNaN(this.p.height)?R(d.grid.bDiv).height():this.p.height)&&(i=200),t.alertleft=e[0]+this.p.width/2-parseInt(t.alertwidth,10)/2,t.alerttop=e[1]+i/2-25),i=R(".ui-jqgrid").css("font-size")||"11px",R.jgrid.createModal(a,"<div>"+t.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+R.jgrid.jqID(d.p.id),jqModal:!0,drag:!0,resize:!0,caption:t.alertcap,top:t.alerttop,left:t.alertleft,width:t.alertwidth,height:t.alertheight,closeOnEscape:t.closeOnEscape,zIndex:t.alertzIndex,styleUI:d.p.styleUI},"#gview_"+R.jgrid.jqID(d.p.id),R("#gbox_"+R.jgrid.jqID(d.p.id))[0],!0,{"font-size":i}));var r,o=1,n=function(){R(this).hasClass(q.disabled)||R(this).addClass(q.hover)},l=function(){R(this).removeClass(q.hover)};for(t.cloneToTop&&d.p.toppager&&(o=2),r=0;r<o;r++){var s,c,p,u=R("<table class='ui-pg-table navtable ui-common-table'><tbody><tr></tr></tbody></table>"),h="<td class='ui-pg-button "+q.disabled+"' style='width:4px;'><span class='ui-separator'></span></td>";0===r?(0===(c=g).indexOf("#")&&(c=c.substring(1),c="#"+R.jgrid.jqID(c)),p=d.p.id,c===d.p.toppager&&(p+="_top",o=1)):(c=d.p.toppager,p=d.p.id+"_top"),"rtl"===d.p.direction&&R(u).attr("dir","rtl").css("float","right"),j=j||{},t.add&&(s=R("<td class='ui-pg-button "+q.cornerall+"'></td>"),R(s).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+t.addicon+"'></span>"+t.addtext+"</div>"),R("tr",u).append(s),R(s,u).attr({title:t.addtitle||"",id:j.id||"add_"+p}).click(function(){return R(this).hasClass(q.disabled)||(R.jgrid.setSelNavIndex(d,this),R.jgrid.isFunction(t.addfunc)?t.addfunc.call(d):R(d).jqGrid("editGridRow","new",j)),!1}).hover(n,l),s=null),f=f||{},t.edit&&(s=R("<td class='ui-pg-button "+q.cornerall+"'></td>"),R(s).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+t.editicon+"'></span>"+t.edittext+"</div>"),R("tr",u).append(s),R(s,u).attr({title:t.edittitle||"",id:f.id||"edit_"+p}).click(function(){var e;return R(this).hasClass(q.disabled)||((e=d.p.selrow)?(R.jgrid.setSelNavIndex(d,this),R.jgrid.isFunction(t.editfunc)?t.editfunc.call(d,e):R(d).jqGrid("editGridRow",e,f)):(R.jgrid.viewModal("#"+a.themodal,{gbox:"#gbox_"+R.jgrid.jqID(d.p.id),jqm:!0}),R("#jqg_alrt").focus())),!1}).hover(n,l),s=null),w=w||{},t.view&&(s=R("<td class='ui-pg-button "+q.cornerall+"'></td>"),R(s).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+t.viewicon+"'></span>"+t.viewtext+"</div>"),R("tr",u).append(s),R(s,u).attr({title:t.viewtitle||"",id:w.id||"view_"+p}).click(function(){var e;return R(this).hasClass(q.disabled)||((e=d.p.selrow)?(R.jgrid.setSelNavIndex(d,this),R.jgrid.isFunction(t.viewfunc)?t.viewfunc.call(d,e):R(d).jqGrid("viewGridRow",e,w)):(R.jgrid.viewModal("#"+a.themodal,{gbox:"#gbox_"+R.jgrid.jqID(d.p.id),jqm:!0}),R("#jqg_alrt").focus())),!1}).hover(n,l),s=null),v=v||{},t.del&&(s=R("<td class='ui-pg-button "+q.cornerall+"'></td>"),R(s).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+t.delicon+"'></span>"+t.deltext+"</div>"),R("tr",u).append(s),R(s,u).attr({title:t.deltitle||"",id:v.id||"del_"+p}).click(function(){var e;return R(this).hasClass(q.disabled)||(d.p.multiselect?0===(e=d.p.selarrrow).length&&(e=null):e=d.p.selrow,e?(R.jgrid.setSelNavIndex(d,this),R.jgrid.isFunction(t.delfunc)?t.delfunc.call(d,e):R(d).jqGrid("delGridRow",e,v)):(R.jgrid.viewModal("#"+a.themodal,{gbox:"#gbox_"+R.jgrid.jqID(d.p.id),jqm:!0}),R("#jqg_alrt").focus())),!1}).hover(n,l),s=null),(t.add||t.edit||t.del||t.view)&&R("tr",u).append(h),b=b||{},t.search&&(s=R("<td class='ui-pg-button "+q.cornerall+"'></td>"),R(s).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+t.searchicon+"'></span>"+t.searchtext+"</div>"),R("tr",u).append(s),R(s,u).attr({title:t.searchtitle||"",id:b.id||"search_"+p}).click(function(){return R(this).hasClass(q.disabled)||(R.jgrid.setSelNavIndex(d,this),R.jgrid.isFunction(t.searchfunc)?t.searchfunc.call(d,b):R(d).jqGrid("searchGrid",b)),!1}).hover(n,l),b.showOnLoad&&!0===b.showOnLoad&&R(s,u).click(),s=null),t.refresh&&(s=R("<td class='ui-pg-button "+q.cornerall+"'></td>"),R(s).append("<div class='ui-pg-div'><span class='"+q.icon_base+" "+t.refreshicon+"'></span>"+t.refreshtext+"</div>"),R("tr",u).append(s),R(s,u).attr({title:t.refreshtitle||"",id:"refresh_"+p}).click(function(){if(!R(this).hasClass(q.disabled)){R.jgrid.isFunction(t.beforeRefresh)&&t.beforeRefresh.call(d),d.p.search=!1,d.p.resetsearch=!0;try{if("currentfilter"!==t.refreshstate){var e=d.p.id;d.p.postData.filters="";try{R("#fbox_"+R.jgrid.jqID(e)).jqFilter("resetFilter")}catch(e){}R.jgrid.isFunction(d.clearToolbar)&&d.clearToolbar.call(d,!1)}}catch(e){}switch(t.refreshstate){case"firstpage":R(d).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":R(d).trigger("reloadGrid",[{current:!0}])}R.jgrid.isFunction(t.afterRefresh)&&t.afterRefresh.call(d),R.jgrid.setSelNavIndex(d,this)}return!1}).hover(n,l),s=null),h=R(".ui-jqgrid").css("font-size")||"11px",R("body").append("<div id='testpg2' class='ui-jqgrid "+R.jgrid.styleUI[y].base.entrieBox+"' style='font-size:"+h+";visibility:hidden;' ></div>"),h=R(u).clone().appendTo("#testpg2").width(),R("#testpg2").remove(),d.p._nvtd&&(t.dropmenu?(u=null,R(d).jqGrid("_buildNavMenu",c,p,m,f,j,v,b,w)):h>d.p._nvtd[0]?(d.p.responsive?(u=null,R(d).jqGrid("_buildNavMenu",c,p,m,f,j,v,b,w)):R(c+"_"+t.position,c).append(u).width(h),d.p._nvtd[0]=h):R(c+"_"+t.position,c).append(u),d.p._nvtd[1]=h),d.p.navGrid=!0}d.p.storeNavOptions&&(d.p.navOptions=t,d.p.editOptions=f,d.p.addOptions=j,d.p.delOptions=v,d.p.searchOptions=b,d.p.viewOptions=w,d.p.navButtons=[])}}})},navButtonAdd:function(l,s){var c=this[0].p.styleUI,e=R.jgrid.styleUI[c].navigator;return s=R.extend({caption:"newButton",title:"",buttonicon:e.icon_newbutton_nav,onClickButton:null,position:"last",cursor:"pointer",internal:!1},s||{}),this.each(function(){var t,i,e,a,d,r,o,n;this.grid&&"string"==typeof l&&(0===l.indexOf("#")&&(l=l.substring(1)),l="#"+R.jgrid.jqID(l),n=R(".navtable",l)[0],i=R.jgrid.styleUI[c].common.disabled,e=R.jgrid.styleUI[c].common.hover,a=R.jgrid.styleUI[c].common.cornerall,d=R.jgrid.styleUI[c].common.icon_base,(t=this).p.storeNavOptions&&!s.internal&&t.p.navButtons.push([l,s]),n?s.id&&void 0!==R("#"+R.jgrid.jqID(s.id),n)[0]||(r=R("<td></td>"),"NONE"===s.buttonicon.toString().toUpperCase()?R(r).addClass("ui-pg-button "+a).append("<div class='ui-pg-div'>"+s.caption+"</div>"):R(r).addClass("ui-pg-button "+a).append("<div class='ui-pg-div'><span class='"+d+" "+s.buttonicon+"'></span>"+s.caption+"</div>"),s.id&&R(r).attr("id",s.id),"first"!==s.position||0===n.rows[0].cells.length?R("tr",n).append(r):R("tr td",n).eq(0).before(r),R(r,n).attr("title",s.title||"").click(function(e){return R(this).hasClass(i)||(R.jgrid.setSelNavIndex(t,this),R.jgrid.isFunction(s.onClickButton)&&s.onClickButton.call(t,e)),!1}).hover(function(){R(this).hasClass(i)||R(this).addClass(e)},function(){R(this).removeClass(e)})):(n=R(".dropdownmenu",l)[0])&&(o=R(n).val(),n=s.id||R.jgrid.randId(),n=R('<li class="ui-menu-item" role="presentation"><a class="'+a+' g-menu-item" tabindex="0" role="menuitem" id="'+n+'">'+(s.caption||s.title)+"</a></li>"),o&&("first"===s.position?R("#"+o).prepend(n):R("#"+o).append(n),R(n).on("click",function(e){return R(this).hasClass(i)||(R("#"+o).hide(),R.jgrid.isFunction(s.onClickButton)&&s.onClickButton.call(t,e)),!1}).find("a").hover(function(){R(this).hasClass(i)||R(this).addClass(e)},function(){R(this).removeClass(e)}))))})},navSeparatorAdd:function(a,d){var e=this[0].p.styleUI,r=R.jgrid.styleUI[e].common;return d=R.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},d||{}),this.each(function(){var e,t,i;this.grid&&("string"==typeof a&&0!==a.indexOf("#")&&(a="#"+R.jgrid.jqID(a)),e=R(".navtable",a)[0],this.p.storeNavOptions&&this.p.navButtons.push([a,d]),e?(t="<td class='ui-pg-button "+r.disabled+"' style='width:4px;'><span class='"+d.sepclass+"'></span>"+d.sepcontent+"</td>","first"!==d.position||0===e.rows[0].cells.length?R("tr",e).append(t):R("tr td",e).eq(0).before(t)):(e=R(".dropdownmenu",a)[0],t="<li class='ui-menu-item "+r.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>",e&&(i=R(e).val())&&("first"===d.position?R("#"+i).prepend(t):R("#"+i).append(t))))})},_buildNavMenu:function(p,u,h,g,m,f,j,v){return this.each(function(){var t=this,e=R.jgrid.getRegional(t,"nav"),i=t.p.styleUI,a=(R.jgrid.styleUI[i].navigator,R.jgrid.styleUI[i].filter),d=R.jgrid.styleUI[i].common,r="form_menu_"+R.jgrid.randId(),e=h.navButtonText||e.selectcaption||"Actions",e="<button class='dropdownmenu "+d.button+"' value='"+r+"'>"+e+"</button>";R(p+"_"+h.position,p).append(e);var o,n,l,s,c={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id};l=R(".ui-jqgrid").css("font-size")||"11px",s=R('<ul id="'+r+'" class="ui-nav-menu modal-content" role="menu" tabindex="0" style="display:none;font-size:'+l+'"></ul>'),h.add&&(o=(m=m||{}).id||"add_"+u,n=R('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+o+'">'+(h.addtext||h.addtitle)+"</a></li>").click(function(){return R(this).hasClass(d.disabled)||(R.jgrid.isFunction(h.addfunc)?h.addfunc.call(t):R(t).jqGrid("editGridRow","new",m),R(s).hide()),!1}),R(s).append(n)),h.edit&&(o=(g=g||{}).id||"edit_"+u,n=R('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+o+'">'+(h.edittext||h.edittitle)+"</a></li>").click(function(){var e;return R(this).hasClass(d.disabled)||((e=t.p.selrow)?R.jgrid.isFunction(h.editfunc)?h.editfunc.call(t,e):R(t).jqGrid("editGridRow",e,g):(R.jgrid.viewModal("#"+c.themodal,{gbox:"#gbox_"+R.jgrid.jqID(t.p.id),jqm:!0}),R("#jqg_alrt").focus()),R(s).hide()),!1}),R(s).append(n)),h.view&&(o=(v=v||{}).id||"view_"+u,n=R('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+o+'">'+(h.viewtext||h.viewtitle)+"</a></li>").click(function(){var e;return R(this).hasClass(d.disabled)||((e=t.p.selrow)?R.jgrid.isFunction(h.editfunc)?h.viewfunc.call(t,e):R(t).jqGrid("viewGridRow",e,v):(R.jgrid.viewModal("#"+c.themodal,{gbox:"#gbox_"+R.jgrid.jqID(t.p.id),jqm:!0}),R("#jqg_alrt").focus()),R(s).hide()),!1}),R(s).append(n)),h.del&&(o=(f=f||{}).id||"del_"+u,n=R('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+o+'">'+(h.deltext||h.deltitle)+"</a></li>").click(function(){var e;return R(this).hasClass(d.disabled)||(t.p.multiselect?0===(e=t.p.selarrrow).length&&(e=null):e=t.p.selrow,e?R.jgrid.isFunction(h.delfunc)?h.delfunc.call(t,e):R(t).jqGrid("delGridRow",e,f):(R.jgrid.viewModal("#"+c.themodal,{gbox:"#gbox_"+R.jgrid.jqID(t.p.id),jqm:!0}),R("#jqg_alrt").focus()),R(s).hide()),!1}),R(s).append(n)),(h.add||h.edit||h.del||h.view)&&R(s).append("<li class='ui-menu-item "+d.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'></li>"),h.search&&(o=(j=j||{}).id||"search_"+u,n=R('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+o+'">'+(h.searchtext||h.searchtitle)+"</a></li>").click(function(){return R(this).hasClass(d.disabled)||(R.jgrid.isFunction(h.searchfunc)?h.searchfunc.call(t,j):R(t).jqGrid("searchGrid",j),R(s).hide()),!1}),R(s).append(n),j.showOnLoad&&!0===j.showOnLoad&&R(n).click()),h.refresh&&(o=j.id||"search_"+u,n=R('<li class="ui-menu-item" role="presentation"><a class="'+d.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+o+'">'+(h.refreshtext||h.refreshtitle)+"</a></li>").click(function(){if(!R(this).hasClass(d.disabled)){R.jgrid.isFunction(h.beforeRefresh)&&h.beforeRefresh.call(t),t.p.search=!1,t.p.resetsearch=!0;try{if("currentfilter"!==h.refreshstate){var e=t.p.id;t.p.postData.filters="";try{R("#fbox_"+R.jgrid.jqID(e)).jqFilter("resetFilter")}catch(e){}R.jgrid.isFunction(t.clearToolbar)&&t.clearToolbar.call(t,!1)}}catch(e){}switch(h.refreshstate){case"firstpage":R(t).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":R(t).trigger("reloadGrid",[{current:!0}])}R.jgrid.isFunction(h.afterRefresh)&&h.afterRefresh.call(t),R(s).hide()}return!1}),R(s).append(n)),R(s).hide(),R("body").append(s),R("#"+r).addClass("ui-menu "+a.menu_widget),R("#"+r+" > li > a").hover(function(){R(this).addClass(d.hover)},function(){R(this).removeClass(d.hover)}),R(".dropdownmenu",p+"_"+h.position).on("click",function(e){var t=R(this).offset(),i=t.left,a=parseInt(t.top),t=R(this).val();R("#"+t).show().css({top:a-(R("#"+t).height()+10)+"px",left:i+"px"}),e.stopPropagation()}),R("body").on("click",function(e){R(e.target).hasClass("dropdownmenu")||R("#"+r).hide()})})},GridToForm:function(a,d){return this.each(function(){var e,t=this;if(t.grid){var i=R(t).jqGrid("getRowData",a);if(i)for(e in i)i.hasOwnProperty(e)&&(R("[name="+R.jgrid.jqID(e)+"]",d).is("input:radio")||R("[name="+R.jgrid.jqID(e)+"]",d).is("input:checkbox")?R("[name="+R.jgrid.jqID(e)+"]",d).each(function(){R(this).val()==i[e]?R(this)[t.p.useProp?"prop":"attr"]("checked",!0):R(this)[t.p.useProp?"prop":"attr"]("checked",!1)}):R("[name="+R.jgrid.jqID(e)+"]",d).val(i[e]))}})},FormToGrid:function(t,a,d,r){return this.each(function(){var e,i;this.grid&&(d=d||"set",r=r||"first",e=R(a).serializeArray(),i={},R.each(e,function(e,t){i[t.name]=t.value}),"add"===d?R(this).jqGrid("addRowData",t,i,r):"set"===d&&R(this).jqGrid("setRowData",t,i))})}})});