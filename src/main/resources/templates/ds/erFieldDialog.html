<!DOCTYPE html>
<html lang="zh-CN" layout:decorate="~{layout/hadmin}">
<head>
	<title>字段列表</title>
	<!-- Bootstrap-table -->
	<link th:href="@{/webjars/bootstrap-table/bootstrap-table.min.css}" rel="stylesheet" />
</head>
<body layout:fragment="content">
	<div class="p-xs">
		<table id="erFields" class="full-width no-borders"
			data-toggle="table" 
			th:data-url="|@{/}erField/ajax/list?erUuid=${erUuid}|">
	    	<thead>
	            <tr>
	                <th data-formatter="$.seqFormatter">序号</th>
	                <th data-field="name">列名</th>
	                <th data-field="comment">注释</th>
	                <th data-field="typeName">类型</th>
	                <th data-field="size" data-align="right">精度</th>
	                <th data-field="digit" data-align="right">标度</th>
	                <th data-field="isNullable" data-align="center" data-formatter="$.yesNoFormatter">是否可为空</th>
	                <th data-field="autoIncrement" data-align="center" data-formatter="$.yesNoFormatter">是否自增</th>
	                <th data-field="columnDef">字段默认值</th>
	                <th data-field="isPk" data-align="center" data-formatter="$.yesNoFormatter">主键</th>
	                <th data-field="isFk" data-align="center" data-formatter="$.yesNoFormatter">外键</th>
	            </tr>
	        </thead>
		</table>
	</div>
	<!-- Bootstrap-table -->
	<script th:src="@{/webjars/bootstrap-table/bootstrap-table.min.js}"></script>
	<script th:src="@{/webjars/bootstrap-table/locale/bootstrap-table-zh-CN.js}"></script>
	<script type="text/javascript">
		$(function () {
			var erFields = $("#erFields");
			erFields.bootstrapTable("resetView", { height: $(window).height() * 0.97 });
			erFields.on("post-body.bs.table", function () {
				$(".bootstrap-table .fixed-table-body table.full-width.no-borders>tbody").each(function (i, e) {
					var trs = $(e).find("tr");
					trs.each(function (j, tr) {
						if(j === trs.length - 1) {
							var tds = $(tr).find("td");
							tds.each(function (k, td) {
								if(k < tds.length - 1) {
									var tdWidth = $(td).width();
									$(e).parents(".fixed-table-container:eq(0)").find(".fixed-table-header>table.full-width.no-borders>thead>tr>th").eq(k).width(tdWidth);
									$(e).parents(".fixed-table-container:eq(0)").find(".fixed-table-body>table.full-width.no-borders>thead>tr>th").eq(k).width(tdWidth);
								}
							});
						}
					});
				});
			});
		});
	</script>
</body>
</html>