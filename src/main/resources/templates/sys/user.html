<!DOCTYPE html>
<html lang="zh-CN" layout:decorate="~{layout/decorate}">
<head>
    <title>用户管理</title>
</head>
<body layout:fragment="content" class="myui">
	<div class="easyui-layout" 
		data-options="fit:true">
		<div data-options="region:'center',
				split:true,
				border:false
			">
            <table id="dataGrid" 
            	class="easyui-datagrid"
            	data-options="border:false,
					fit:true,
					fitColumns:true,
					toolbar:'#toolbar',
					pagination:true,
					pageSize:20,
					method:'get',
					url:'user/ajax/page',
                   	onBeforeLoad:$.pageOnBeforeLoad
               	">
                <thead>
	                <tr>
	                	<th data-options="field:'userId',title:'用户ID',checkbox:true"></th>
	                	<th data-options="field:'seq',title:'序号',formatter:function(value,row,index){var opts=$('#dataGrid').datagrid('options');return opts.pageSize*(opts.pageNumber-1)+index+1;}"></th>
                      	<th data-options="field:'nickname',title:'昵称'"></th>
                      	<th data-options="field:'username',title:'账号',width:110"></th>
                     	<th data-options="field:'mobile',title:'手机',width:110"></th>
                      	<th data-options="field:'email',title:'邮箱'"></th>
                     	<th data-options="field:'enabled',title:'是否启用',align:'center',formatter:$.yesNoFormatter"></th>
                      	<th data-options="field:'accountNonExpired',title:'账户未过期',align:'center',hidden:true,formatter:$.yesNoFormatter"></th>
                       	<th data-options="field:'credentialsNonExpired',title:'凭证未过期',align:'center',hidden:true,formatter:$.yesNoFormatter"></th>
                       	<th data-options="field:'accountNonLocked',title:'是否锁定',align:'center',formatter:$.noYesFormatter"></th>
                       	<th data-options="field:'remark',title:'备注'"></th>
	                    <th data-options="field:'createdAt',title:'创建时间',width:153,align:'right',formatter:$.createdAtFormatter"></th>
	                    <th data-options="field:'updatedAt',title:'更新时间',width:153,align:'right',formatter:$.updatedAtFormatter"></th>
	                </tr>
                </thead>
            </table>
        </div>
    </div>
    <div id="toolbar" class="myui-toolbar">
		<a href="javascript:void(0);"
          	class="easyui-menubutton myui-btn-normal myui-btn-green"
         	data-options="iconCls:'fa fa-plus',
           		hasDownArrow:false
        	">新增
       	</a>
   		<a href="javascript:void(0);"
        	class="easyui-menubutton myui-btn-normal myui-btn-orange"
         	data-options="menu:'#moreOpsMenu',
           		iconCls:'fa fa-list',
           		hasDownArrow:true
       		">更多
       	</a>
       	<div id="moreOpsMenu" class="myui-toolbar">
        	<div onclick="javascript:void(0);"
        		class="easyui-menubutton"
           		data-options="iconCls:'fa fa-key',
           			hasDownArrow:false
            	">重置密码
         	</div>
		</div>
		<form id="form" class="search-box">
	    	<input type="text" name="orgId"
	    		id="orgId"
          		class="easyui-combotreegrid"
             	th:data-options="|fitColumns:true,
					singleSelect:true,
                 	prompt:'组织机构',
                 	width:280,
					idField:'orgId',
			   		treeField:'text',
					method:'get',
                 	url:'org/ajax/getTree',
                  	columns:[[
                       	{field:'text',title:'组织机构名称',width:100}
                	]],
               		onLoadSuccess:function(row,data){
               			$(this).treegrid('expandAll');
               		}
           		|"/>
	   		<input type="text" name="keywords"
	    		id="keywords" 
	   			class="easyui-textbox"
	        	data-options="prompt:'关键词',
	        		width:220
	        	"/>
	        <a href="javascript:search();" 
	        	class="easyui-linkbutton myui-btn-blue myui-btn-normal"
	       		data-options="iconCls:'fa fa-search'
	         	">查询
	    	</a>
	    	<a href="javascript:reset();"
       			class="easyui-linkbutton myui-btn-brown myui-btn-normal"
       			data-options="iconCls:'fa fa-trash'
       			">重置
          	</a>
		</form> 
    </div>
<script type="text/javascript">
	/**
	 * 查询
	 */
	function search () {
		$("#dataGrid").datagrid("load", {
			orgId: $('#orgId').combo('getValue'),
			keywords: $('#keywords').textbox('getValue')
		});
	}
	
	/**
	 * 重置
	 */
	function reset () {
		$('#form').form('clear');
		search();
	}
</script>
</body>
</html>